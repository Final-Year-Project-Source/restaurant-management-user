(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1752],{14490:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var n=a(13428),r=a(2265),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},l=a(46614),i=r.forwardRef(function(e,t){return r.createElement(l.Z,(0,n.Z)({},e,{ref:t,icon:s}))})},12960:function(e,t,a){Promise.resolve().then(a.bind(a,70753))},70753:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var n=a(57437),r=a(75370),s=a(65149),l=a(24033),i=a(2265),o=a(76158),d=a(11425),c=a(1434),u=a(35414),m=a(90850),p=e=>{let{children:t,disabledSecondary:a,onClickSecondaryBtn:r,secondaryBtnChildren:s,onClickPrimaryBtn:p,primaryBtnChildren:v,isShowPrimaryButton:f,onClickBackBtn:x}=e,h=(0,i.useRef)(null),{scrollBottom:g}=(0,d.I)(h);(0,l.useRouter)();let{height:y}=(0,c.d)();return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"flex w-full pt-[22px] px-4 fixed z-10 justify-between",children:(0,n.jsx)(o.hU,{icon:(0,n.jsx)(u.Y4,{}),onClick:x})}),(0,n.jsx)("div",{ref:h,className:"h-screen overflow-y-auto max-h-screen-85",children:t}),(0,n.jsx)(m.Z,{className:g-30>0?"shadow-medium-top":"",disabledSecondary:a,isShowPrimaryButton:f,onClickPrimaryBtn:p,primaryBtnChildren:v,onClickSecondaryBtn:r,secondaryBtnChildren:s})]})},v=a(16691),f=a.n(v),x=a(16835),h=a(93046),g=a(16011),y=a(6779),b=a(97500),N=a.n(b),k=a(23172);a(53962);var j=a(18968),S=a(66693),_=a(91637),C=a(17325),I=()=>{var e,t,a,o;let d=(0,l.useRouter)(),u=(0,l.useSearchParams)(),[m,v]=(0,i.useState)(""),[b,I]=(0,i.useState)([]),[B,w]=(0,i.useState)([]),{isMobile:Z}=(0,c.d)(),[P,M]=(0,i.useState)(0),q=u.get("id"),{data:A,isFetching:E}=(0,j.$d)({id:q||""},{skip:!q}),R=(0,i.useMemo)(()=>null==A?void 0:A.data,[A]),z=u.get("bill_id"),D=(0,h.v9)(e=>e.tableReducer.tableId),{data:H}=(0,S.fq)({id:D},{skip:!D}),T=null==H?void 0:H.data,{data:F}=(0,_.$r)({id:null==T?void 0:T.discount},{skip:!(null==T?void 0:T.discount)}),L=null==F?void 0:F.data,O=(0,i.useMemo)(()=>(null==R?void 0:R.price)||0,[R,L]),[U,W]=(0,i.useState)(!0),{image_url:G,name:$,description:J,dietary_restrictions:Q,modifier_ids:Y,modifiers_info:K}=R||{},[V,X]=(0,i.useState)("/assets/images/product-default.png"),ee=(0,h.I0)();(0,i.useEffect)(()=>{W(!!G),G&&X(G)},[G]);let[et,ea]=(0,i.useState)({}),en=(0,i.useCallback)((e,t)=>{ea(a=>({...a,[t]:e}))},[]),er=(0,i.useMemo)(()=>null==K?void 0:K.flatMap(e=>{let t=et[e.name];return t?e.modifier_options.filter(e=>t.includes(e.name)):[]}),[et,K]),es=(0,i.useMemo)(()=>null==er?void 0:er.reduce((e,t)=>e+(+(null==t?void 0:t.price)||0),0),[er,L]);(0,i.useEffect)(()=>{M(+O+ +es||0),I(er)},[O,es,er]);let el=(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"Add to basket"})," ",(0,n.jsxs)("span",{className:"font-normal",children:["ãƒ» ",(0,y.T4)(P)]})]});return(0,n.jsx)(p,{secondaryBtnChildren:el,onClickBackBtn:()=>{d.push(z?"/menu?bill_id=".concat(z):"/menu")},onClickSecondaryBtn:()=>{let e={product:R,notes:m.trim(),modifiers:b,dietary_restrictions:B};ee((0,g.Wf)({...e,quantity:1,operator:x.Nv.ADD})),d.push(z?"/menu?bill_id=".concat(z):"/menu")},disabledSecondary:E||!R,children:(0,n.jsxs)("div",{className:"relative h-full",children:[(0,n.jsxs)("div",{className:"h-[200px] header-background",children:[G&&(0,n.jsx)(f(),{className:"absolute ".concat(Z?"top-[70px]":"top-[50px]"," right-1/2 transform translate-x-1/2 rounded-full shadow-2xl"),src:V,alt:"product",width:Z?200:260,height:260,loading:"lazy",onLoad:()=>W(!1),onError:()=>{X("/assets/images/product-default.png"),W(!1)}}),(U||E)&&(0,n.jsx)(k.Z.Avatar,{className:"absolute top-[24px] right-1/2 transform translate-x-1/2",size:273,active:!0,style:{backgroundColor:"#e5e5e5"}})]}),E?(0,n.jsx)(k.Z,{className:"product-skeleton-paragraph px-6 pt-[88px] pb-[30px]",active:!0,paragraph:{rows:3}}):(0,n.jsxs)("div",{className:"flex flex-col px-6 pt-[88px] pb-[30px] text-black-500 space-y-[29px]",children:[(0,n.jsxs)("div",{className:"flex flex-col space-y-[15px]",children:[(0,n.jsx)("span",{className:"text-2xl font-medium",children:$}),(0,n.jsx)("span",{className:"text-sm font-normal ".concat(N().className),dangerouslySetInnerHTML:{__html:J||""}}),(0,n.jsx)("div",{className:"flex space-x-[9px] items-start",children:Array.isArray(Q)&&Q.map((e,t)=>(0,n.jsx)(s.Z,{iconName:e},t))})]}),(null==Y?void 0:Y.length)>0&&(null===(e=null==K?void 0:K.map(e=>{let t=((null==e?void 0:e.modifier_options)||[]).filter(Boolean).sort((e,t)=>(e.position||0)-(t.position||0))||[];return{id:e._id,nameGroup:null==e?void 0:e.name,options:t.map(e=>({label:e.name||"",price:e.price>0?e.price.toString():""}))}}))||void 0===e?void 0:e.map((e,t)=>{var a,s;return(0,n.jsx)(r.Z,{groupName:null!==(a=e.nameGroup)&&void 0!==a?a:"",options:null!==(s=e.options)&&void 0!==s?s:[],onChange:en},t)})),(null===(t=(0,y.Bg)((null==R?void 0:R.dietary_restrictions)||[]))||void 0===t?void 0:t.length)>0&&(0,n.jsx)(r.Z,{groupName:"Dietary requests",options:null!==(o=null===(a=(0,y.Bg)((null==R?void 0:R.dietary_restrictions)||[]))||void 0===a?void 0:a.map(e=>({label:"Make it "+e})))&&void 0!==o?o:[],onChange:e=>{w(e)}}),(0,n.jsxs)("div",{className:"flex flex-col space-y-2.5",children:[(0,n.jsx)("span",{className:"font-medium text-sm text-black-400",children:"Notes"}),(0,n.jsx)(C.Z,{valuePlaceholder:"Notes for the kitchen",onChange:e=>{v(e.target.value)}})]})]})]})})}},17325:function(e,t,a){"use strict";var n=a(57437),r=a(2265),s=a(77190),l=a(91623),i=a(97500),o=a.n(i);a(19509);let{TextArea:d}=s.default;t.Z=e=>{let{valueInput:t,required:a,valuePlaceholder:s,onChange:i,disabled:c,value:u,...m}=e,[p,v]=(0,r.useState)(t);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(l.ZP,{theme:{components:{Input:{paddingInline:15,paddingBlock:10}},token:{lineHeight:1.5,colorText:"#131C16",fontFamily:"".concat(o(),", sans-serif"),fontSize:14,colorBgContainer:"transparent",colorBorder:"rgba(19, 28, 22, 0.2)",colorPrimary:"transparent",colorPrimaryHover:"transparent",colorPrimaryActive:"transparent",colorTextPlaceholder:"rgba(0, 0, 0, 0.50)",borderRadius:16}},children:(0,n.jsx)(d,{className:o().className,value:u||p,required:a,onChange:e=>{v(e.target.value),i&&i(e)},placeholder:s,autoSize:{minRows:3,maxRows:3.1},disabled:c})})})}},16011:function(e,t,a){"use strict";a.d(t,{Wf:function(){return c},ZW:function(){return u}});var n=a(16835),r=a(50940),s=a(73135),l=a(42077),i=a.n(l);let o={basket:(0,r.fk)()},d=(0,s.oM)({name:"basket",initialState:o,reducers:{reset:e=>{e.basket=null,(0,r.Fm)()},update:(e,t)=>{var a,r,s;let l=e.basket||{orderItems:[]};if(!t.payload)return;let{quantity:o,operator:d,product:c,notes:u,modifiers:m,dietary_restrictions:p}=t.payload,v=null==l?void 0:null===(a=l.orderItems)||void 0===a?void 0:a.findIndex(e=>{var t;return(null==e?void 0:null===(t=e.product)||void 0===t?void 0:t.id)===c.id&&i()((null==e?void 0:e.dietary_restrictions)||[],p||[])&&i()((null==e?void 0:e.notes)||"",u||"")&&i()((null==e?void 0:e.modifiers)||[],m||[])});v>-1&&(!m||i()(null===(r=l.orderItems[v])||void 0===r?void 0:r.modifiers,m)||!p||i()(null===(s=l.orderItems[v])||void 0===s?void 0:s.dietary_restrictions,p)||!u||i()(l.orderItems[v].notes,u))?0===o?l.orderItems.splice(v,1):d===n.Nv.ADD?l.orderItems[v].quantity+=o:d===n.Nv.SUB?l.orderItems[v].quantity-=o:d===n.Nv.EQUAL&&(l.orderItems[v].quantity=o):l.orderItems.push({product:c,notes:u||"",modifiers:m||[],quantity:o,dietary_restrictions:p||[]});let f={...l};localStorage.setItem("basket",JSON.stringify(f)),e.basket=f}}}),{update:c,reset:u}=d.actions;t.ZP=d.reducer},53962:function(){}},function(e){e.O(0,[4872,2598,8809,5687,2379,8863,7190,6691,6394,2077,1369,3305,4440,5220,2971,4938,1744],function(){return e(e.s=12960)}),_N_E=e.O()}]);